options
{
    /** 使用jdk1.6 */
    JDK_VERSION = "1.6";

    /** 生成非静态方法 */
    static = false;

    /** 让jjtree给每个非终结符生成一个对象 */
    MULTI = true;

    /** 开启访问者模式 */
    VISITOR = true;
}

PARSER_BEGIN(Parser)
package cc.concurrent.mango.parser;

import java.io.StringReader;
import java.io.Reader;

public class Parser {
    public Parser(String s) {
        this((Reader)(new StringReader(s)));
    }
}
PARSER_END(Parser)

<O>
TOKEN :
{
        <O_NUMBER: ["1"-"9"] (["0"-"9"])* >
    |   <O_DOT: "." >
    |   <O_FIELD: ["a"-"z","A"-"Z","_"] (["a"-"z","A"-"Z","_", "0"-"9"])* >
}

<O>
MORE :
{
        <O_BLANK: "" > {SwitchTo(DEFAULT);}
}

<G>
TOKEN :
{
        <G_NUMBER: ["1"-"9"] (["0"-"9"])* >
}


<DEFAULT>
TOKEN:
{
        <COLON: ":" > {SwitchTo(O);}
    |   <TEXT: (~[":", "#", "(", "."])+ >
}


SimpleNode parse()  #RootNode :
{
}
{
    (Text() | Parameter())+ <EOF>
    {
        return jjtThis;
    }
}

void Parameter() #ParameterNode :
{
    Token t;
}
{
    <COLON> t=<O_NUMBER> {jjtThis.setNum(t.image);} (<O_DOT> t=<O_FIELD> {jjtThis.addFieldName(t.image);})*
}

void Text() #TextNode :
{
    Token t;
}
{
    t=<TEXT>
    {
        jjtThis.setText(t.image);
    }
}